# Set prefix to ctrl+space
set -g prefix C-Space

# Enable mouse support
set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows on window close
set -g renumber-windows on

# Setup true-colors
set -g default-terminal "${TERM}"
set -ga terminal-overrides ",${TERM}:Tc"
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'  # undercurl support
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'  # underscore colours - needs tmux-3.0

# Theme
set -g message-style "bg=default,fg=default,bold"
set -g status-style  "bg=default"
set -g mode-style "bg=#223249,fg=default"

set -g pane-border-style "fg=#16161D"
set -g pane-active-border-style "fg=#16161D"
set -g pane-border-format "(#{pane_index}) #{pane_title} → #{pane_current_command}"

set -g status-interval 4
set -g status-position bottom
set -g status-style bg=default,fg=default
set -g status-justify centre
set -g status-left "#[bold]#{?client_prefix,,  #S  }#[bg=blue,fg=#16161D,bold]#{?client_prefix,  #S  ,}"
set -g status-right "#U@#H  "
set -g window-status-format " #I:#W "
set -g window-status-current-format "#[bg=#363646,fg=default] #I:#W#{?window_zoomed_flag, 󰊓 , }"

# List of plugins
set -g @plugin "tmux-plugins/tmux-sensible"
set -g @plugin "tmux-plugins/tpm"
set -g @plugin "tmux-plugins/tmux-pain-control"
set -g @plugin "nhdaly/tmux-better-mouse-mode"
set -g @plugin "soyuka/tmux-current-pane-hostname"
set -g @plugin "aserowy/tmux.nvim"

# Plugin configs
set -g @tmux-nvim-navigation-cycle false

# Automatically install TMUX plugin manager
if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"

# Initialize TMUX plugin manager
run "~/.tmux/plugins/tpm/tpm"

# Key bindings
bind C-h send-keys "C-h"
bind C-j send-keys "C-j"
bind C-k send-keys "C-k"
bind C-l send-keys "C-l"

bind M-h send-keys "M-h"
bind M-j send-keys "M-j"
bind M-k send-keys "M-k"
bind M-l send-keys "M-l"

# Vim copy mode
set-window-option -g mode-keys vi
bind P paste-buffer
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle
